# Team-Info
| (1) 과제명 | 영양제 입문자들을 위해 Fine-tuning 기반 LLM으로 영양제 선택부터 최적의 복용시간까지 안내하는 개인 맞춤형 영양제 추천 서비스 |
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 32-홈런볼 |
| (3) 팀 구성원 | 정아윤 (2176344): 리더, 프론트엔드, AI <br> 김사랑 (2040042): 팀원, 백엔드, AI <br> 김시온 (2176060): 팀원, AI, 백엔드 |
| (4) 팀 지도교수 | 윤명국 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 파인튜닝 LLM, 맞춤형 영양제 추천, 복용 시간 추천 및 알림  |
| (7) 과제 내용 요약 | 최근 중장년층뿐만 아니라 20대까지 건강 관리에 대한 관심이 높아지면서, 영양제 섭취가 보편화되고 있다. 효과적인 건강 관리를 위해서는 단순히 영양제를 복용하는 것뿐만 아니라, 개인의 몸 상태와 생활 패턴에 맞춰 적절한 제품을 선택하고 올바른 타이밍에 꾸준히 섭취하는 것이 중요하다. 하지만 영양제를 처음 섭취하는 사람들은 다양한 제품 중에서 자신의 건강 상태와 목표에 맞는 제품을 고르는 데 어려움을 겪는다. 이에 따라 사용자의 건강 데이터를 기반으로 개인 맞춤형 영양제를 추천하고, 최적의 복용 시간을 안내하며, 푸시 알림을 통해 꾸준한 섭취를 도와주는 서비스가 필요하다. 또한 많은 소비자가 제품 라벨에 기재된 복잡한 성분 정보에 대한 이해 부족으로 인해 제품 선택에 어려움을 겪고 있는 점을 고려하여 OCR 기반의 라벨 스캔 기능을 제공함으로써 성분 정보를 쉽게 분석하고 이해할 수 있도록 지원하려고 한다. 이를 통해 소비자들이 보다 효과적으로 영양제를 선택하고, 체계적으로 건강을 관리할 수 있도록 돕고자 한다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | 1. 해결하고자 하는 문제 <br> 현대인들의 건강에 대한 관심이 높아지면서 영양제 섭취가 보편화되고 있다. 그러나 시장에 다양한 제품이 출시되면서 소비자들은 자신의 건강 상태와 목표에 맞는 영양제를 선택하는 데 어려움을 겪는다. 특히, 영양제 입문자들은 다음과 같은 문제로 인해 효과적인 건강 관리를 하지 못하는 경우가 많다. <br> (1) 영양제 선택의 어려움 <br> 시중에 판매되는 많은 제품들 중 자신에게 적합한 영양제를 고르기가 어렵고, 성분과 함량을 이해하기 어려워 비효율적인 제품을 선택할 가능성이 높다. <br> (2) 지속적인 복용의 어려움 <br> 영양제의 효과를 체감하기 어려워 꾸준히 복용하지 않는 경우가 많다.<br>(3) 영양제 라벨 정보 해석의 어려움 <br> 성분명과 함량이 복잡하게 표시되어 있어 원료의 효능이나 부작용에 대한 정보가 부족한 일반 소비자가 이해하기 어렵다. <br><br> 2. Target Customer 정의<br>본 서비스는 건강 관리에 관심은 있지만, 어떤 영양제를 선택해야 할지 모르는 입문자들을 주요 대상으로 한다. 맞춤형 영양 관리가 필요하지만 정보가 부족한 사용자, 생활 습관이나 건강 고민을 고려해 최적의 영양제를 찾고 싶은 소비자, 그리고 영양제 복용을 꾸준히 실천하고자 하는 사람들에게 도움을 주고자 한다. 본 서비스를 통해 사용자가 보다 쉽게 자신에게 맞는 영양제를 선택하고, 꾸준한 복용 습관을 형성할 수 있도록 지원하여, 궁극적으로 효과적인 건강 관리와 영양제 섭취 만족도를 높이는 것을 목표로 한다.  |
| (2) 기존연구와의 비교 | (1) 필라이즈 <br> 필라이즈는 사용자 입력이 선택지 중심으로 제한되어 있어 섭취 목적이나 건강 고민을 구체적으로 반영하기 어렵고, 복잡한 영양 성분 정보를 사용자 친화적인 자연어로 설명하는 기능은 제공되지 않는다는 한계가 있다. 반면, 본 서비스는 사용자의 주관식 응답을 추가로 입력받아 GPT 모델이 건강 상태를 보다 정밀하게 분석하며, 음성 입력 기능을 도입해 데이터 입력의 편의성을 높였다. 또한 OCR을 활용해 영양제 라벨에서 성분을 자동 추출하고, 이를 일상적인 언어로 쉽게 풀어 제공함으로써 영양제 입문자도 정보를 직관적으로 이해하고 신뢰할 수 있도록 지원한다.<br><br>(2) 메디콕 <br> 메디콕은 검진 결과와 설문을 통해 영양제를 추천해주지만 한정된 건강 고민 항목을 사용자가 직접 선택해야 한다는 점에서 한계가 있다. 또한 해당 서비스는 사용자에게 추천된 영양제를 하루 단위 묶음으로 직접 전달하여 간편하게 섭취할 수 있도록 하는 배송 서비스에 중점을 두고 있다. 반면, 본 서비스는 영양제 섭취 목적을 사용자가 일일이 입력하는 번거로움을 줄이기 위해 음성 인식을 통한 입력이 가능하도록 했다. 영양제를 처음 접하는 사용자가 정보를 이해하기 쉽게 자세히 풀어서 설명하며, 복용 시간에 대한 안내와 복용 관리까지 제공한다는 점에서 차별화를 두고 있다. <br><br> (3) 필그램 <br> 필그램은 간편한 설문을 통해 영양제를 추천하는 장점이 있지만, 건강 고민 반영 방식이 제한적이고 복용 목적을 고려하지 않아 맞춤형 추천의 정밀도가 떨어진다. 또한, 식품의약품안전처 인증 제품이 아닐 가능성이 있어 신뢰성 문제가 발생할 수 있다. 반면, 본 서비스는 보다 종합적인 건강 데이터 분석을 기반으로 맞춤형 추천을 제공하고, 복용 습관 형성 및 성분 정보 제공 기능까지 포함하여, 사용자들이 신뢰할 수 있는 제품을 선택하고 꾸준히 복용할 수 있도록 지원한다. 이를 통해 단순한 추천 서비스를 넘어 실질적인 건강 관리 솔루션을 제공하는 것이 본 서비스의 가장 큰 차별점이다. |
| (3) 제안 내용 | (1) 사용자의 건강 상태, 목표에 맞는 영양제 추천 <br> 사용자의 건강 문제, 생활 습관, 복용 목적(주관식 음성/텍스트 데이터)에 관한 설문 응답 결과를 기반으로 사용자의 건강 문제를 분석하여 보여주고, 해당 문제를 해결하기 위해 사용자에게 가장 적합한 영양제를 추천한다. 이때 사용자에게 가장 필요한 영양 성분과 사용자가 이미 복용 중인 영양제를 고려하여 중복되지 않도록 한다.<br><br> (2) 최적의 복용 시간 유도 및 지속 복용 독려 <br> 영양제의 주요 성분을 바탕으로 영양제 복용의 효과를 극대화할 수 있는 최적의 복용 시간을 추천하고, 푸시 알림을 통해 사용자가 설정한 시간에 복용 알림을 제공함으로써 영양제 복용 일정을 관리할 수 있도록 한다. 또 사용자가 영양제 복용의 효과를 체감할 수 있도록 주간 복용 기록을 시각화하여 보여주고, 지난주 복용률과 비교하여 지속적인 복용을 위한 동기 부여를 제공한다. <br><br> (3) 어려운 성분 정보를 사용자가 이해할 수 있게 쉽게 전달 <br> 영양제 제품 라벨의 복잡한 성분과 함량 정보를 촬영하면 OCR 스캔을 거쳐 텍스트 데이터화하고, 사용자가 쉽게 이해할 수 있는 자연어 형태로 변환하여 정리된 결과를 보여준다.  |
| (4) 기대효과 및 의의 | 본 서비스를 통해 소비자들은 영양제 선택부터 복용까지 보다 쉽고 효과적으로 관리할 수 있으며, 이를 통해 다음과 같은 기대 효과를 얻을 수 있다. <br><br> (1) 맞춤형 건강 관리 실현 <br> 사용자의 건강 상태와 목표에 맞는 영양제를 추천함으로써 불필요한 제품을 복용하거나 성분이 중복되는 문제를 줄이고 보다 효과적인 건강 관리를 가능하게 한다. <br><br> (2) 영양제 복용 습관 개선 및 지속적인 건강 관리 유도 <br> 최적의 복용 시간을 추천하고 푸시 알림과 기록 관리 기능을 제공함으로써, 사용자가 꾸준히 영양제를 복용하도록 돕는다. 이를 통해 단기적인 건강 관리가 아닌 장기적인 건강 습관 형성이 가능해진다. <br><br> (3) 영양제 성분 정보의 접근성 향상 <br> OCR 기반 성분 분석 기능을 통해 소비자가 제품 라벨을 쉽게 이해할 수 있도록 돕고, 성분별 효능과 주의사항을 명확하게 제공함으로써 사용자 본인에 맞는 제품 선택을 지원한다. <br><br> (4) 소비자의 합리적인 구매 결정 지원 <br> 정확한 성분 정보와 맞춤 추천을 통해 소비자가 자신의 건강 목표에 맞는 최적의 제품을 선택할 수 있도록 돕는다. <br><br> (5) 데이터 기반 건강 관리 솔루션으로 확장 가능 <br> 사용자의 복용 기록 및 건강 데이터를 기반으로, 향후 맞춤형 건강 관리 서비스로 확장할 수 있는 가능성을 가진다. |
| (5) 주요 기능 리스트 | 1. 개인 맞춤형 영양제 추천 : LLM 모델을 활용한 개인 맞춤형 영양제 추천 시스템 설계 <br> (1) 데이터 수집 및 저장 <br> 사용자의 객관식 설문 응답 데이터와 직접 입력한 주관식 텍스트/음성 데이터를 수집 후 데이터베이스에 저장 및 구조화한다. <br> (2) 영양 성분 추출 및 분석 <br> GPT-3.5 Turbo 모델을 PubMed 논문 기반으로 영양 성분과 생활 습관 및 건강 상태의 관계를 키워드로 설정하여 fine-tuning한다. <br> 데이터베이스에 저장된 사용자 설문 데이터를 토대로 사용자의 건강 문제를 분석하고, 필요한 영양 성분을 추출하도록 프롬프팅한다. <br> (3) 영양제 추천 알고리즘 <br> 추출된 영양 성분 데이터를 기반으로, GPT-3.5 Turbo 모델이 식품의약품안전처 데이터베이스에서 영양제를 추천하며, 다음 조건을 충족하도록 프롬프팅을 구성한다. <br> - 사용자가 현재 복용 중인 영양제와 중복된 성분이 포함된 제품은 추천 대상에서 제외  <br> - 추천된 영양 성분 중 두 가지 이상을 포함한 제품 우선 추천  <br> - 영양 성분 간 시너지 효과가 있는 부원료를 함유한 제품을 우선 추천 <br><br> 2. 사용자 맞춤형 영양제 섭취 알림 : 영양제 복용 푸시 알림 시스템 설계 <br> (1) 영양 성분 분석 기반 최적의 섭취 시간 추천 <br> GPT-3.5 Turbo 모델이 영양제의 주요 성분을 추출하도록 프롬프팅을 설계한다. <br> GPT-3.5 Turbo 모델을 PubMed 논문 기반으로 영양 성분과 복용 시간의 관계를 키워드로 설정하여 fine-tuning한다. <br> 영양제의 주성분에 따라 효과 및 흡수율을 고려하여 최적의 섭취 시간을 추천하도록 프롬프팅을 설계한다. <br>(2) 복용 알림 시스템 <br>사용자가 직접 푸시 알림 시간을 설정하고 수정 · 삭제할 수 있는 API를 구현한다. <br> Firebase Cloud Messaging을 활용하여 디바이스별 실시간 푸시 알림 전송한다. <br><br> 3. 영양제 성분 정보 자동 분석 : OCR 기반 영양제 라벨 스캔 및 성분 정보 분석 시스템 설계 <br> (1) 라벨 스캔 및 성분 데이터 추출 <br> Google Cloud Vision API를 사용하여 촬영된 영양제 라벨 이미지를 텍스트 데이터로 변환하고, 데이터에서 주요 성분, 효능 정보 텍스트를 추출한다. <br>(2) 자연어 변환 및 정보 제공 <br> GPT-3.5 Turbo 모델을 활용하여 성분 및 효능 정보를 자연어로 재구성하는 프롬프팅을 적용한다. <br><br> 4. 복용 기록 관리 시스템 <br>사용자의 주간 영양제 복용 데이터를 데이터베이스에 저장한다. <br>체크리스트 UI를 통해 날짜별 복용 완료 상태를 주간 캘린더에 시각적으로 표시한다. <br> 지난주 대비 복용률을 분석하여 지속적인 복용을 유도하는 동기부여 메시지를 제공한다. |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | - UI 분석/설계 모델 : <img src= "https://github.com/user-attachments/assets/4e50bcdb-f7dd-44f3-886c-de6d00f6e2b7"> <br> - E-R 다이어그램/DB 설계 모델(테이블 구조) : <img src="https://github.com/user-attachments/assets/33f3c3cd-d493-4518-a012-4f0bb61bb5dc"> <br>  |
| (2) 전체 시스템 구성 | <img src="https://github.com/user-attachments/assets/6bdbc73e-315f-48b2-81b1-3632dc0f6604"> <br> <br>**• Frontend (React Native + TypeScript):**<br>◦ 편리한 사용자 경험을 위한 UI 애플리케이션 구축<br>◦ 사용자 건강 설문 응답 입력 받아 서버로 전송<br>◦ 사용자의 영양제 섭취 목적을 텍스트 또는 음성으로 입력 받아 서버로 전송<br>◦ 사용자가 복용 중인 영양제 정보 입력 받아 서버로 전송<br>◦ 사용자 카메라 및 갤러리 접근하여 이미지를 서버로 전송<br><br>**• Backend:**<br>◦ **Spring Boot (Main Application 서버)**<br>▪ 사용자 소셜 로그인; 사용자 설문 정보 생성, 수정, 조회<br>▪ 복용중인 영양제 목록 생성, 수정, 삭제<br>▪ 알림 생성, 수정, 조회, 삭제; Firebase Cloud Messaging API 연동<br>◦ **Flask (AI 연동 및 관련 API 처리)**<br>▪ GPT API 호출 및 프롬프트 구성<br>▪ 맞춤형 영양제 추천, 최적 복용 알림 시간 추천 (POST)<br>▪ 추천 목록에서 찜한 영양제 생성, 삭제; 영양제 분석 결과 생성, 삭제<br><br>**• AI (Python, OpenAI GPT-3.5 Turbo):**<br>◦ 파인튜닝된 GPT-Turbo 3.5 모델이 사용자의 건강 설문 데이터를 분석하여 필요 영양 성분 추출, 이에 적합한 영양제 추천<br>◦ 사용자가 복용중인 영양제의 최적 복용 알림 시간 추천<br>◦ 스캔된 영양제 라벨에서 추출한 영양 성분 정보를 영양제 입문자가 이해하기 쉬운 자연어로 변환하여 제공<br><br><br>**• Database (PostgreSQL):**<br>◦ 사용자 설문 응답 데이터 저장<br>◦ 식품의약품안전처 영양제 데이터 저장<br>◦ 사용자가 복용중인/추천 목록에서 찜한 영양제 정보 저장<br>◦ 추천 복용 알림 시간 저장<br>◦ 영양 성분 분석 결과 저장<br><br> 사용하는 오픈소스 혹은 외부 모듈 <br>**• CLOVA Speech Recognition API**<br>– 사용자의 음성 입력(복용 목적)을 텍스트로 변환하여 서버에 전달<br>**• Naver Shopping Search API**<br>– 영양제 이름 기반으로 제품 이미지를 검색 및 표시<br>**• GPT-Turbo 3.5 OpenAI API**<br>– 영양제 추천 및 복용 시간 추천을 위한 자연어 처리 모델 호출<br>**• PubMed ESearch API**<br>– GPT-Turbo 3.5 모델을 파인튜닝하기 위한 영양제 관련 논문 학습 데이터 수집<br>**• Google Cloud Vision API**<br>– 영양제 라벨 이미지에서 텍스트 추출 및 영양 성분 분석 (OCR)<br>**• 건강기능식품 품목제조신고 OPEN API**<br>– 국내 영양제 38,000개에 대한 제품 정보 수집 및 DB 적재<br>**• Firebase Cloud Messaging API**<br>– 추천된 복용 시간에 푸시 알림 전송 (React Native 앱과 연동)<br> |
| (3) 주요엔진 및 기능 설계 | **#기능 1. 로그인 & 로그아웃**<br>1. **사용자 인증 모듈 (Spring Boot + Spring Security)**<br><br>- **목적**: 사용자 인증 및 식별을 통해 보안 기반의 개인 맞춤 서비스를 제공<br>- **구현 방법**:<br>- Google OAuth2 Client + Spring Security 기반 인증<br>- 로그인 성공 시 JWT 액세스 토큰 발급<br>- 사용자 정보를 PostgreSQL `users` 테이블에 저장 또는 갱신<br>- 로그아웃 시 클라이언트 토큰 삭제 + 서버 리프레시 토큰 무효화<br>- **실험 내용 및 결과**:<br>- JWT 포함 요청에 대해 Spring Security 필터 정상 검증<br>- 비정상 토큰 접근 시 401 오류 반환 확인<br><br>**#기능 2. 건강 설문 음성 입력 기능**<br>2. **음성 기반 건강 설문 모듈 (Spring Boot + CLOVA Speech API)**<br><br>- **목적**: 음성 입력을 통한 사용자 건강 정보 설문 응답 기능 제공<br>- **구현 방법**:<br>- 클라이언트 음성파일 수신 후 CLOVA Speech API로 전송<br>- 반환된 텍스트를 설문 포맷에 맞게 파싱 후 `user_survey` 테이블에 저장<br>- **실험 내용 및 결과**:<br>- 음성 → 텍스트 변환이 정확함을 검증<br>- 파싱 유효성 검사 적용 → 데이터 누락 및 오류 방지 확인<br><br>**#기능 3. 맞춤형 영양제 추천 기능**<br>3. **영양제 추천 AI 모듈 (Flask + GPT-3.5-Turbo Fine-tuned)**<br><br>- **목적**: 건강 설문 데이터를 기반으로 개인 맞춤형 영양 성분 및 제품 추천<br>- **구현 방법**:<br>- Flask에서 GPT-3.5-Turbo 호출, 사용자 설문/복용 정보로 프롬프트 구성<br>- PubMed 기반 파인튜닝된 모델이 필요한 성분 도출 → 제품 추천<br>- 추천된 성분 기반으로 식약처 API와 연동하여 상세 정보 반환<br>- **실험 내용 및 결과**:<br>- 주요 성분 매칭 정확도 검증<br>- 프롬프팅 개선을 통한 결과 안정성 향상<br><br>**#기능 4. 최적의 복용 알림 시간 추천 및 알림 기능**<br>4. **복용 시간 추천 및 알림 모듈 (Flask + Spring Boot + FCM)**<br><br>- **목적**: 성분별 흡수 특성을 고려한 최적 복용 시간 추천 및 푸시 알림 제공<br>- **구현 방법**:<br>- GPT-3.5가 성분 기반 시간 추천 → Flask가 DB(`recommended_intake_time`)에 저장<br>- Spring Boot가 FCM 예약 푸시 전송 요청<br>- FCM이 지정 시간에 사용자 기기로 알림 전송<br>- **구현 내용**:<br>- iOS 개발자 등록 비용 제약으로 Firebase Cloud Messaging API의 푸시 알림 기능 사용 불가로, 푸시 알림 기능 구현을 위해 Android 환경으로 전환 중에 있음.<br><br>**#기능 5. 영양제 복용 관리 기능**<br>5. **영양제 복용 관리 모듈 (Spring Boot + PostgreSQL)**<br><br>- **목적**: 사용자 복용 기록 관리 및 주간 복용률 통계 제공<br>- **구현 방법**:<br>- `intake_log`, `intake_summary` 테이블로 기록 관리<br>- 오늘 복용 예정 제품은 `user_supplements` 기준 생성<br>- 주간 비교 데이터 시각화 제공<br>- **실험 내용 및 결과**:<br>- 복용률 시각화 정확도 검증 완료<br><br>**#기능 6. 영양제 제품 라벨 이미지로 성분 분석 기능**<br>6. **영양제 라벨 OCR 분석 모듈 (Google Cloud Vision + GPT-3.5)**<br><br>- **목적**: 제품 라벨 이미지에서 주요 성분, 함량, 주의사항 등 자동 추출<br>- **구현 방법**:<br>- Google Vision API로 이미지 OCR 처리 → 텍스트 변환<br>- GPT에 전달하여 자연어 요약 및 분석 결과 구성<br>- 결과를 `analyzed_supplements` 테이블에 저장<br>- **실험 내용 및 결과**:<br>- 전문용어를 이해하기 쉬운 표현으로 성공적으로 변환됨을 확인<br><br>**#기타**<br>7. **프론트엔드 모듈 (React Native)**<br><br>- **목적**: 사용자 인터페이스(UI) 및 시각화 중심 기능 제공<br>- **구현 방법**:<br>- 건강 설문/음성/이미지 입력 UI 구성 (카메라/마이크 연동)<br>- 추천 결과, 복용 시간, 복용률 등 정보 시각화 화면 구현<br>- React Navigation 및 Redux 기반 상태 관리<br>- **실험 내용 및 결과**:<br>- 사용자 요청/응답 흐름 정상 작동<br><br>8. **통합 인프라 모듈 (Docker, EC2, Nginx)**<br><br>- **목적**: 전체 서비스의 일괄 실행 및 배포 안정성 확보<br>- **구현 방법**:<br>- Spring Boot & Flask 각각 Dockerfile 작성<br>- Docker Compose로 컨테이너 통합 및 Nginx 리버스 프록시 구성<br>- EC2 인스턴스에서 서비스 통합 실행, RDS PostgreSQL은 SSL 보안 적용<br>- **실험 내용 및 결과**:<br>- 컨테이너 상태 자동 감지 및 재시작 기능 확인<br> |
| (4) 주요 기능의 구현 | Pill Me In은 사용자 건강 데이터를 기반으로 한 개인 맞춤형 영양제 추천 서비스를 구축하고, 해당 서비스의 효율적 운영을 위한 복용 관리 및 알림 기능을 통합한 백엔드 시스템을 구현하였다. 이를 위해 Spring Boot, Flask, PostgreSQL, JWT, Google OAuth, CLOVA Speech Recognition API, Google Vision API, FCM 등 다양한 기술 및 AI 기반 외부 인터페이스를 활용하였다.<br><br>전체 서비스는 Spring Boot 기반의 인증·API 서버, Flask 기반 AI 서버, 그리고 PostgreSQL 데이터베이스 및 **외부 API 연동(Google OAuth, CLOVA, GPT 3.5 Turbo, FCM)** 을 통해 구성되며, 각각의 기능은 모듈 단위로 분리되어 통합 연동된다.<br><br>**#기능별 구현 및 실험 설명**<br><br>**1. 로그인 & 로그아웃 (Spring Security + OAuth2)**<br><br>[주요 흐름]<br> - 클라이언트는 /login 엔드포인트를 통해 Google OAuth 인증 요청<br> - Spring Security 필터 체인이 Google OAuth 인증 처리<br> - 인증 성공 시, 사용자 정보를 users 테이블에서 확인 후 등록 또는 수정<br> - JWT 토큰 생성 후 클라이언트에게 응답 전달<br> - 로그아웃은 클라이언트 측 JWT 삭제 방식으로 처리<br><br>[SW 모듈 간 연관성]<br> - Spring Boot 서버 내 Spring Security, OAuth2 Client 구성 요소가 Google OAuth 인증 처리<br> - 인증된 사용자 정보는 PostgreSQL의 users 테이블과 연동<br> - JWT는 서버 내부 JWT 생성 로직에서 생성되어 HTTP 응답 헤더를 통해 프론트엔드에 전달됨<br> - 클라이언트에서 보유한 JWT는 이후 모든 인증이 필요한 API 요청 시 Authorization 헤더로 포함됨<br><br>**2. 건강 설문 음성 입력 기능 (CLOVA Speech Recognition 연동)**<br><br>[주요 흐름]<br> - 클라이언트는 음성 파일(.m4a)을 multipart/form-data로 전송<br> - Spring Boot 서버에서 해당 파일을 CLOVA Speech Recognition API로 전달<br> - 응답받은 텍스트를 JSON으로 변환하고 user_survey 테이블에 저장<br><br>[SW 모듈 간 연관성]<br> - Spring Boot 서버가 클라이언트로부터 받은 .m4a 파일을 CLOVA Speech Recognition API로 전달하고, CLOVA로부터 받은 음성 텍스트는 PostgreSQL의 user_survey 테이블에 저장<br> - 저장된 건강 설문 데이터는 추후 Flask 기반 Supplement Recommendation App과 데이터 연동되어 확용됨<br><br>**3. 맞춤형 영양제 추천 기능 (Flask + GPT 기반 AI 인터페이스)**<br><br>[주요 흐름]<br> - 사용자 요청 시, Spring 서버는 설문 응답(JSON)을 PostgreSQL에서 조회<br> - 해당 데이터를 Flask 기반 AI 서버로 전달<br> - AI 서버는 PubMed 기반 논문 데이터로 파인튜닝된 GPT-3.5-Turbo 모델을 통해:<br>1차 프롬프트: 건강 고민에 따른 필요한 영양 성분 추출 ![스크린샷 2025-05-07 145821](https://github.com/user-attachments/assets/5845c6d4-94a1-41df-a981-d97662aeca9f) <br>2차 프롬프트: 추출된 성분을 기반으로 영양제 3종 추천 ![image](https://github.com/user-attachments/assets/6bc9302a-4c14-4732-8169-70e5019f028e) ![image](https://github.com/user-attachments/assets/6de86916-8944-4663-bcf1-1944dde8d9f0) <br> - 결과값은 사전 적재된 식약처 기반 영양제 데이터와 매칭하여 프론트에 전달<br><br>[AI 인터페이스 상세 설명]<br> - Flask AI 서버 내 recommendation_handler.py에서 GPT API 호출 수행<br> - OpenAI GPT-Turbo 3.5는 각 health concern에 따른 성분 도출 및 해당 성분 기반 추천을 이중 프롬프트 체계로 구현<br> - GPT 호출 응답 → 성분 파싱 → 제품 매핑 → 결과 구조화 → 응답<br><br>[SW 모듈 간 연관성]<br> - PostgreSQL의 user_survey 테이블에서 설문 데이터를 조회해 해당 데이터를 Flask 기반 Supplement Recommendation App으로 전달됨<br> - Flask 앱은 OpenAI GPT-3.5 Turbo API와 PubMed API를 연동하여 최종 추천된 성분 및 제품 정보를 사전 구축된 DB(api_supplements)와 매핑 후 추천 결과 생성<br> - PostgreSQL DB 연동: user_survey, api_supplements<br><br>**4. 복용 시간 추천 및 푸시 알림 (AI + FCM 연동)**<br><br>[주요 흐름]<br> - 사용자의 복용 중 영양제 리스트 조회<br>AI 서버로 성분 정보 전달 → GPT 모델이 흡수율 고려하여 복용 시간 추천<br> - 추천 시간은 recommended_intake_time 테이블에 저장 및 FCM 등록<br> - FCM은 해당 시각에 알림 전송<br><br>[AI 인터페이스 상세 설명]<br> - GPT 모델은 "비타민D는 식후", "마그네슘은 자기 전" 등의 과학적 흡수율 기반 논문 정보를 참고하도록 프롬프트 설계 ![image](https://github.com/user-attachments/assets/06c7b130-6ca3-425a-bb74-d02acd6a1ffc)  <br> - Flask AI 서버에서 absorption_prompt_builder.py로 프롬프트 구성<br> - 시간 추천 결과는 Flask 서버 내 alarm_schedule_service을 통해 DB에 저장<br><br>[SW 모듈 간 연관성]<br> - 사용자 복용 영양제 정보는 user_supplements 테이블에서 조회하고, 해당 정보는 Flask 기반 Intake Time Recommendation App으로 전달되어 OpenAI GPT API 모듈 호출<br> - 추천된 복용 시간은 recommended_intake_time 테이블에 저장되고, 저장된 정보는 Firebase Cloud Messaging API에 연동되어 사용자의 디바이스로 푸시 알림이 전송됨<br><br>**5. 복용 체크 및 이력 관리 기능**<br><br>[주요 흐름]<br> - 사용자가 체크한 복용 정보는 intake_log 테이블에 저장<br> - 주간 복용률 통계는 intake_summary 테이블에 저장되어 분석<br> - 수정/삭제 API도 구현되어 UI에서 관리 가능<br><br>[SW 모듈 간 연관성]<br> - 프론트엔드는 복용 체크 상태를 API 요청으로 전송하며, 해당 요청은 Spring Boot 서버의 복용 기록 컨트롤러에서 수신<br> - 서버는 사용자 ID 및 복용 대상 supplement ID를 기준으로 PostgreSQL의 user_supplements 및 intake_log 테이블과 연계하여 저장 또는 갱신 작업을 수행<br> - 주간 단위 복용 데이터는 Spring 서버 내 스케줄러 또는 통계 처리 로직을 통해 intake_summary 테이블에 집계되어 저장됨<br><br>**6. 제품 라벨 이미지 OCR 분석 (Google Cloud Vision API)**<br><br>[주요 흐름]<br> - 사용자 업로드 이미지를 Google Cloud Vision API로 전달<br>반환된 텍스트를 파싱하여 주요 성분, 효과, 주의사항 등으로 사용자가 이해하기 쉽게 GPT-3.5 Turbo 모델이 가공하여 반환하도록 프롬프트 설계 ![image](https://github.com/user-attachments/assets/98528a96-be9c-4235-ac0d-b8e633864b0c) <br> - 결과는 analyzed_supplements 테이블에 저장<br><br>[SW 모듈 간 연관성]<br> - 프론트에서 이미지 파일을 업로드하면, Flask 서버는 Google Cloud Vision API와 통신하여 OCR 텍스트 추출<br> - 추출된 텍스트는 Flask 기반 Ingredients Analysis App에 전달되어 GPT-3.5 Turbo API를 통해 가공<br> - 최종 분석 결과는 PostgreSQL DB의 analyzed_supplements 테이블에 저장됨 |
| (5) 기타 | **• 진척도**: 주요 기능 약 80%, 전체 약 60% 개발 완료<br><br>**• 진척 사항 (근거 내용)**:<br>    ◦ 프론트엔드 화면 구현 80% 완료, API 연동 50% 완료 <br> |

<br>
